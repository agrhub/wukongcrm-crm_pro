(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0d4ad","chunk-0d4a","chunk-0d4ad6","chunk-7a9c","chunk-b698"],{"2NAp":function(t,e,n){"use strict";var a=n("mrH5");n.n(a).a},"7qmR":function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"g",function(){return o}),n.d(e,"e",function(){return s}),n.d(e,"b",function(){return l}),n.d(e,"f",function(){return r}),n.d(e,"d",function(){return c}),n.d(e,"c",function(){return u});var a=n("t3Un");function i(t){return Object(a.a)({url:"oaExamineCategory/saveOrUpdateOaExamineSort",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function o(t){return Object(a.a)({url:"oaExamine/setOaExamine",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function s(t){return Object(a.a)({url:"oaExamine/myInitiate",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function l(t){return Object(a.a)({url:"oaExamine/deleteOaExamine",method:"post",data:t})}function r(t){return Object(a.a)({url:"oaExamine/queryOaExamineInfo/"+t,method:"post"})}function c(t){return Object(a.a)({url:"oaExamine/getField",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function u(t){return Object(a.a)({url:"oaExamine/export ",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"},responseType:"blob"})}},"80H+":function(t,e,n){},BsgX:function(t,e,n){"use strict";var a={name:"ReportMenu",components:{},mixins:[n("Z+Ht").a],props:{list:Array},data:function(){return{}},computed:{},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{itemClick:function(t){this.$emit("select",t)}}},i=(n("kSFP"),n("KHd+")),o=Object(i.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"report-menu"},t._l(t.list,function(e,a){return n("span",{key:a,staticClass:"report-menu-btn",on:{click:function(n){t.itemClick(e)}}},[n("i",{staticClass:"report-menu-btn__icon",class:t.getXrIcon(e.type),style:{color:t.getXrIconColor(e.type)}}),t._v(" "),n("span",{staticClass:"report-menu-btn__name"},[t._v(t._s(e.name))])])}))},[],!1,null,"d819a984",null);o.options.__file="ReportMenu.vue";e.a=o.exports},MdnP:function(t,e,n){"use strict";var a={name:"PictureListView",props:{list:{type:Array,required:!0}},methods:{imgZoom:function(t,e){this.$bus.emit("preview-image-bus",{index:e,data:t.map(function(t,e,n){return{url:t.filePath||t.url,name:t.name}})})}}},i=(n("2NAp"),n("KHd+")),o=Object(i.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"picture-list-view"},t._l(t.list,function(e,a){return n("div",{key:a,staticClass:"img-list-item",on:{click:function(e){t.imgZoom(t.list,a)}}},[n("img",{directives:[{name:"src",rawName:"v-src",value:e.filePath||e.url,expression:"imgItem.filePath || imgItem.url"}],key:e.filePath||e.url})])}))},[],!1,null,"5437fe00",null);o.options.__file="PictureListView.vue";e.a=o.exports},NUy3:function(t,e,n){},VmBU:function(t,e,n){"use strict";n.d(e,"e",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"b",function(){return l}),n.d(e,"j",function(){return r}),n.d(e,"h",function(){return c}),n.d(e,"f",function(){return u}),n.d(e,"g",function(){return d}),n.d(e,"i",function(){return p}),n.d(e,"d",function(){return m}),n.d(e,"m",function(){return f}),n.d(e,"l",function(){return h}),n.d(e,"k",function(){return v}),n.d(e,"n",function(){return b});var a=n("t3Un");function i(t){return Object(a.a)({url:"oaLog/queryList",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function o(t){return Object(a.a)({url:"oaLog/addOrUpdate",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function s(t){return Object(a.a)({url:"oaLog/addOrUpdate",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function l(t){return Object(a.a)({url:"oaLog/deleteById",method:"post",data:t})}function r(t){return Object(a.a)({url:"oaLog/readLog",method:"post",data:t})}function c(t){return Object(a.a)({url:"oaLog/queryById",method:"post",data:t})}function u(t){return Object(a.a)({url:"oaLog/queryLogBulletin",method:"post",data:t})}function d(t){return Object(a.a)({url:"oaLog/queryLogBulletinByType",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function p(t){return Object(a.a)({url:"oaLog/queryLogRecordCount",method:"post",data:t})}function m(t){return Object(a.a)({url:"oaLog/getLogWelcomeSpeech",method:"post",data:t})}function f(t){return Object(a.a)({url:"oaLog/export",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"},responseType:"blob"})}function h(t){return Object(a.a)({url:"oaLog/queryCompleteStats",method:"post",data:t})}function v(t){return Object(a.a)({url:"oaLog/queryCompleteOaLogList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function b(t){return Object(a.a)({url:"oaLog/queryIncompleteOaLogList",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},gXsB:function(t,e,n){"use strict";var a=n("80H+");n.n(a).a},kSFP:function(t,e,n){"use strict";var a=n("NUy3");n.n(a).a},mrH5:function(t,e,n){},oWzH:function(t,e,n){"use strict";e.a={methods:{getCategoryIcon:function(t){var e=t&&"string"==typeof t?t.split(","):[];return e.length>1?{icon:e[0],color:e[1]}:{icon:"wk wk-approve",color:"#9376FF"}}}}},slnp:function(t,e,n){"use strict";var a=n("7qmR"),i=n("Ew9n"),o=n("3biH"),s=n("/407"),l=n("hwzM"),r=n("7Qib"),c=n("oWzH"),u={name:"ExamineDetail",components:{SlideView:i.a,ExamineInfo:o.a,RelatedBusinessCell:s.a,CRMFullScreenDetail:function(){return Promise.all([n.e("chunk-84f5"),n.e("chunk-dc06"),n.e("chunk-7a9c")]).then(n.bind(null,"3z7q"))},FileCell:l.a},filters:{fileName:function(t){return(t.name&&t.name.length>10?t.name.substring(0,10)+"...":t.name)+"("+Object(r.h)(t.size)+")"}},mixins:[c.a],props:{id:[String,Number],detailIndex:[String,Number],detailSection:[String,Number],noListenerClass:{type:Array,default:function(){return["list-box"]}}},data:function(){return{loading:!1,categoryId:"",type:"",detail:null,list:[],categoryName:"",fileList:[],imgList:[],travelList:[],travelField:[{prop:"vehicle",label:"交通工具"},{prop:"trip",label:"单程往返"},{prop:"startAddress",label:"出发城市"},{prop:"endAddress",label:"目的城市"},{prop:"startTime",label:"开始时间"},{prop:"endTime",label:"结束时间"},{prop:"duration",label:"时长（天）"},{prop:"description",label:"备注"}],expensesField:[{prop:"startAddress",label:"出发城市"},{prop:"endAddress",label:"目的城市"},{prop:"startTime",label:"开始时间"},{prop:"endTime",label:"结束时间"},{prop:"traffic",label:"交通费（元）"},{prop:"stay",label:"住宿费（元）"},{prop:"diet",label:"餐饮费（元）"},{prop:"other",label:"其他费用（元）"},{prop:"description",label:"费用明细描述"}],relatedID:"",relatedCRMType:"",showRelatedDetail:!1}},computed:{relatedListData:function(){for(var t=this,e={},n=["contacts","customer","business","contract"],a=function(a){var i=n[a],o=t.detail[i+"List"]||[];o.length>0&&(e[i]=o.map(function(t){return t.id&&(t[i+"Id"]=t.id),t}))},i=0;i<n.length;i++)a(i);return e},detailIcon:function(){return this.getCategoryIcon(this.detail.examineIcon)}},watch:{id:function(t){this.detail=null,this.getDetail()}},mounted:function(){},methods:{viewAfterEnter:function(){this.getDetail()},getBaseInfo:function(){var t=this;this.loading=!0,Object(a.d)({examineId:this.id,isDetail:1}).then(function(e){t.list=e.data,t.loading=!1}).catch(function(){t.loading=!1})},getDetail:function(){var t=this;this.loading=!0,Object(a.f)(this.id).then(function(e){t.loading=!1,t.categoryId=e.data.categoryId,t.type=e.data.type,t.getBaseInfo(),t.detail=e.data,t.categoryName=t.detail.categoryTitle,t.fileList=t.detail.file,t.imgList=t.detail.img,t.travelList=t.detail.examineTravelList}).catch(function(){t.loading=!1,t.hideView()})},hideView:function(){this.$emit("hide-view")},checkRelatedDetail:function(t,e){this.relatedID=e[t+"Id"]||e.id,this.relatedCRMType=t,this.showRelatedDetail=!0},handleFile:function(t,e,n){"preview"===t?e&&e.length>0&&this.$bus.emit("preview-image-bus",{index:n,data:e}):"download"===t&&Object(r.d)({path:e.url,name:e.name})},imgZoom:function(t,e){this.$bus.emit("preview-image-bus",{index:e,data:t})},downloadFile:function(t){Object(r.d)({path:t.url,name:t.name})},examineHandle:function(t){this.$emit("on-examine-handle",t,this.detailIndex),this.$emit("handle",t,this.detailIndex)}}},d=(n("gXsB"),n("KHd+")),p=Object(d.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("slide-view",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"d-view",attrs:{"listener-ids":["workbench-main-container"],"no-listener-class":t.noListenerClass},on:{afterEnter:t.viewAfterEnter,close:t.hideView}},[t.detail?n("flexbox",{staticClass:"detail-main",attrs:{orient:"vertical"}},[n("flexbox",{staticClass:"detail-header"},[n("div",{staticClass:"header-icon",style:{backgroundColor:t.detailIcon.color}},[n("i",{class:["wk","wk-"+t.detailIcon.icon]})]),t._v(" "),n("div",{staticClass:"header-name"},[t._v(t._s(t.categoryName))])]),t._v(" "),n("div",{staticClass:"detail-body"},[n("flexbox",{attrs:{gutter:0,align:"stretch",wrap:"wrap"}},t._l(t.list,function(e,a){return"examine_cause"!==e.formType&&"business_cause"!==e.formType?n("flexbox-item",{key:a,staticClass:"b-cell",attrs:{span:.5}},["checkbox"===e.formType?n("div",{staticClass:"b-cell-b"},[n("div",{staticClass:"b-cell-name"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"b-cell-value"},[n("flexbox",{staticStyle:{padding:"0px 10px 10px 0px"},attrs:{gutter:0,wrap:"wrap"}},t._l(e.value,function(e,a){return n("div",{key:a},[t._v("\n                  "+t._s(e)+"  \n                ")])}))],1)]):"file"===e.formType?n("div",{staticClass:"b-cell-b"},[n("div",{staticClass:"b-cell-name"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"b-cell-value"},t._l(e.value,function(a,i){return n("flexbox",{key:i,staticClass:"f-item"},[n("i",{staticClass:"wukong wukong-file f-img"}),t._v(" "),n("div",{staticClass:"f-name"},[t._v(t._s(t._f("fileName")(a)))]),t._v(" "),n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){t.handleFile("preview",e.value,i)}}},[t._v("预览")]),t._v(" "),n("el-button",{attrs:{type:"text"},nativeOn:{click:function(e){t.handleFile("download",a,i)}}},[t._v("下载")])],1)}))]):n("div",{staticClass:"b-cell-b"},[n("div",{staticClass:"b-cell-name"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"b-cell-value"},[t._v(t._s(e.value))])])]):t._e()})),t._v(" "),t.imgList.length>0?n("div",{staticClass:"img-box"},t._l(t.imgList,function(e,a){return n("div",{key:a,staticClass:"img-list",on:{click:function(e){t.imgZoom(t.imgList,a)}}},[n("img",{directives:[{name:"src",rawName:"v-src",value:e.url,expression:"imgItem.url"}],key:e.url})])})):t._e(),t._v(" "),t.fileList.length?n("div",{staticClass:"section"},[n("div",{staticClass:"section__hd"},[n("i",{staticClass:"wukong wukong-file"}),t._v(" "),n("span",[t._v("附件")]),t._v(" "),n("span",[t._v("("+t._s(t.fileList.length)+")")])]),t._v(" "),n("div",{staticClass:"section__bd"},t._l(t.fileList,function(e,a){return n("file-cell",{key:a,attrs:{data:e,list:t.fileList,"cell-index":a}})}))]):t._e(),t._v(" "),t.type&&3==t.type&&t.travelList&&t.travelList.length>0?n("div",{staticClass:"table-sections"},[n("div",{staticClass:"table-sections__title"},[t._v("行程")]),t._v(" "),n("el-table",{staticStyle:{"font-size":"13px"},attrs:{data:t.travelList,align:"center","header-align":"center",stripe:""}},t._l(t.travelField,function(t,e){return n("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,"show-overflow-tooltip":""}})}))],1):t._e(),t._v(" "),t.type&&5==t.type&&t.travelList&&t.travelList.length>0?n("div",{staticClass:"table-sections"},[n("div",{staticClass:"table-sections__title"},[t._v("报销")]),t._v(" "),n("el-table",{staticStyle:{"font-size":"13px"},attrs:{data:t.travelList,align:"center","header-align":"center",stripe:""}},[t._l(t.expensesField,function(t,e){return n("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,"show-overflow-tooltip":""}})}),t._v(" "),n("el-table-column",{attrs:{label:"发票",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("flexbox",{attrs:{justify:"center"}},[n("el-button",{attrs:{type:"text"},nativeOn:{click:function(n){t.handleFile("preview",e.row.img,0)}}},[t._v(t._s(e.row.img?e.row.img.length:0)+"张")])],1)]}}])})],2)],1):t._e(),t._v(" "),Object.keys(t.relatedListData).length>0?n("div",{staticClass:"section"},[n("div",{staticClass:"section__hd"},[n("i",{staticClass:"wukong wukong-relevance"}),t._v(" "),n("span",[t._v("相关信息")])]),t._v(" "),n("div",{staticClass:"section__bd"},t._l(t.relatedListData,function(e,a){return n("div",{key:a},t._l(e,function(e,i){return n("related-business-cell",{key:i,attrs:{data:e,"cell-index":i,type:a,"show-foot":!1},nativeOn:{click:function(n){t.checkRelatedDetail(a,e)}}})}))}))]):t._e(),t._v(" "),n("div",{staticClass:"examine-section"},[n("examine-info",{staticClass:"create-sections-content",attrs:{id:t.id,"record-id":t.detail.examineRecordId,"examine-type":"oa_examine"},on:{"on-handle":t.examineHandle}})],1)],1)],1):t._e(),t._v(" "),n("c-r-m-full-screen-detail",{attrs:{visible:t.showRelatedDetail,"crm-type":t.relatedCRMType,id:t.relatedID},on:{"update:visible":function(e){t.showRelatedDetail=e}}})],1)},[],!1,null,"315bc3f6",null);p.options.__file="ExamineDetail.vue";e.a=p.exports}}]);